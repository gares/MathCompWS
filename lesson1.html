<!DOCTYPE html>
<!--

README:
  - coqdoc_ids must contain all text-area with Coq code
  - init_pkgs may contain ['init, 'math-comp'] for algebra

  These variables are signalled by a "HERE" in a comment

-->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />

    <link rel="stylesheet" href="jscoq/external/bootstrap.min.css" />

    <title>Lesson 1 : Tactic language and Boolean predicates</title>
  </head>

<body>
  <div id="ide-wrapper" class="toggled">
  <div id="code-wrapper">
  <div id="document">

<!-- lesson -->

<h1>Mathematical Components, an introduction</h1>
<p>
objective and talks
</p>
<hr/><!-- ---------------------------------------------------- -->


<h2>Spam</h2>
<p>
the book
</p>
<hr/><!-- ---------------------------------------------------- -->


<h2>Lesson 1: SSR</h2>
<p>
<ul>
	<li>Tactic language</li>
	<li>Boolean reflection</li>
</ul>
</p>
<hr/><!-- ---------------------------------------------------- -->

<h2>Boolean reflection in a nutshell</h2>
<p>
<ul>
	<li>Bool datatype is <i>simple</i></li>
	<li>Symbolic computation is automation</li>
</ul>
</p>
<hr/><!-- ---------------------------------------------------- -->

<h2>The emblematic example</h2>
<p>to say:
<ul>
	<li>.+1</li>
	<li>&lt;</li>
	<li>= true</li>
	<li>= mean equiv</li>
	<li>by []</li>
	<li>elim</li>
	<li>apply</li>
	<li>rewrite</li>
</ul>
</p>
<div><textarea id='coq-leq'>
From mathcomp Require Import all_ssreflect.

Module Leq.

Fixpoint leq (m n : nat) : bool :=
  match m, n with
  | p.+1, q.+1 =&gt; leq p q
  | 0, _ =&gt; true
  | _, _ =&gt; false
  end.
Local Notation "a &lt;= b" := (leq a b).
Local Notation "a &lt; b" := (leq a.+1 b).

Eval compute in 3 &lt;= 7.
Eval compute in 6 &lt;= 4.

Lemma leq0n n : (0 &lt;= n) = true.
Proof.
(*D*)by []. Qed.

Lemma ltnS m n : (m.+1 &lt;= n.+1) = (m &lt;= n).
Proof.
(*D*)by []. Qed.

Lemma leqnn n : n &lt;= n.
Proof.
(*D*) elim: n =&gt; [|m IHm].
(*D*)   by apply: leq0n.
(*D*) rewrite ltnS.
(*D*) by [].
(*D*) Qed.

End Leq.
</textarea></div>
<hr/><!-- ---------------------------------------------------- -->


<h2>A logic in bool</h2>
<p>to say:
<ul>
	<li>andb negb orb</li>
	<li>case</li>
</ul>

</p>

<p>boolean connective, computation is progress, proof by cases</p>

<hr/><!-- ---------------------------------------------------- -->

<h2>Objective: infitude of primes</h2>
<p>
proof sketch, we need arithmetic (and a library)!
</p>

<hr/><!-- ---------------------------------------------------- -->

<h2>A bit of arithmetic, ssr style</h2>
<p>to say:
<ul>
	<li>move</li>
	<li>rewrite //</li>
	<li>Search</li>
	<li>.. &lt; .. &lt; .. </li>
</ul>
</p>

<div><textarea id='coq-contra'>
Lemma example m p : prime p -&gt;
  p %| m `! + 1 -&gt; ~~ (p &lt;= m).
Proof.
move=&gt; prime_p.
apply: contraL.
move=&gt; leq_p_m.
rewrite dvdn_addr.
  rewrite gtnNdvd.
    by [].  (* ~~ false *)
    by [].  (* 0 &lt; 1 *)
  by apply: prime_gt1.  (* 1 &lt; p *)
apply: dvdn_fact.
rewrite leq_p_m andbT.
by apply: prime_gt0. (* 0 &lt; p *)
Qed.
</textarea></div>


<hr/><!-- ---------------------------------------------------- -->

<h2>Bool is not enough</h2>
<p>to say:
<ul>
	<li>exists/curry howard</li>
	<li>bool/Prop</li>
	<li>reflect</li>
</ul>
</p>

<hr/><!-- ---------------------------------------------------- -->

<h2>Views and intro patterns</h2>
<p>to say:
<ul>
	<li>move= /andP[]</li>
</ul>
</p>
<hr/><!-- ---------------------------------------------------- -->


<h2>eqP</h2>
<p>to say:
<ul>
	<li>==</li>
</ul>
</p>
<hr/><!-- ---------------------------------------------------- -->

<h2>Primes</h2>

<div><textarea id='coq-primes'>
Lemma dvdn_fact m n : 0 &lt; m &lt;= n -&gt; m %| n`!.
Proof.
case: m =&gt; //= m; elim: n =&gt; //= n IHn; rewrite ltnS leq_eqVlt.
by case/orP=&gt; [/eqP-&gt; | /IHn]; [apply: dvdn_mulr | apply: dvdn_mull].
Qed.

Lemma prime_above m : exists2 p, m &lt; p & prime p.
Proof.
have /pdivP[p pr_p p_dv_m1]: 1 &lt; m`! + 1 by rewrite addn1 ltnS fact_gt0.
exists p =&gt; //; rewrite ltnNge; apply: contraL p_dv_m1 =&gt; p_le_m.
by rewrite dvdn_addr ?dvdn_fact ?prime_gt0 // gtnNdvd ?prime_gt1.
Qed.
</textarea></div>

<!-- end lesson -->

  </div> <!-- /#document     -->
  </div> <!-- /#code-wrapper -->
  </div> <!-- /#ide-wrapper  -->

  <script src="./jscoq/js/jscoq-loader.js" type="text/javascript"></script>
  <script type="text/javascript">
    var coqdoc_ids = ['coq-leq', 'coq-contra', 'coq-primes']; // HERE
    var coq;

    loadJsCoq('./jscoq/')
              .then(loadJs("./jscoq/external/CodeMirror/addon/runmode/runmode"))
              .then(loadJs("./jscoq/external/CodeMirror/addon/runmode/colorize"))
              .then( function () {
                  var coqInline = document.getElementsByClassName("inline-coq");
                  CodeMirror.colorize(coqInline); })
              .then( function () {
                  coq = new CoqManager (coqdoc_ids,
                                       {
			base_path: './jscoq/',
		        init_pkgs: ['init']    // HERE
		}
                  );
              });
  </script>
</body>
</html>

